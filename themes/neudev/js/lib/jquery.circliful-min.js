"use strict";!function($){$.fn.circliful=function(e,t){var r=$.extend({foregroundColor:"#3498DB",backgroundColor:"#ccc",pointColor:"none",fillColor:"none",foregroundBorderWidth:15,backgroundBorderWidth:15,pointSize:78.5,fontColor:"#aaa",percent:95,animation:1,animationStep:5,icon:"none",iconSize:"0",iconColor:"#ccc",iconPosition:"none",target:0,start:0,showPercent:1,percentageTextSize:22,percentageX:100,percentageY:113,textAdditionalCss:"",targetPercent:0,targetTextSize:17,targetColor:"#2980B9",text:null,textStyle:null,textColor:"#666",textY:null,textX:null,multiPercentage:0,percentages:[],multiPercentageLegend:0,textBelow:!1,noPercentageSign:!1,replacePercentageByText:null,halfCircle:!1,animateInView:!1,decimals:0,alwaysDecimals:!1,title:"Circle Chart",description:"",progressColor:null},e);return this.each(function(){function e(){var e=w,t=Y;if(1===r.multiPercentage){var n,l,a=r.percentages,i=360;for(n=0;n<a.length;++n)l=a[n].percent,t=i/100*l,e=s.find("#circle"+(n+1)),n>0&&(i+=62.5,t=i/100*l),o(e,t,i,l)}else o(e,t,360,l)}function o(e,o,n,l){var a=window.setInterval(function(){b>=o?(window.clearInterval(a),B=1,"function"==typeof t&&t.call(this)):(b+=v,T+=S),r.halfCircle?2*b/(n/100)>=l&&1===B&&(b=n/100*l/2):b/(n/100)>=l&&1===B&&(b=n/100*l),T>r.target&&1===B&&(T=r.target),null===r.replacePercentageByText&&(z=r.halfCircle?parseFloat(100*b/n*2):parseFloat(100*b/n),z=z.toFixed(r.decimals),!r.alwaysDecimals&&(0===l||l>1&&1!==B)&&(z=parseInt(z))),e.attr("stroke-dasharray",b+", 20000"),1!==r.multiPercentage?1===r.showPercent?k.find(".number").text(z):(k.find(".number").text(T),k.find(".percent").text("")):(k.find(".number").text(""),k.find(".percent").text("")),null!==m&&$.each(m,function(t,o){r.halfCircle&&(t/=2),b>=t*(n/100)&&e.css({stroke:o,transition:"stroke 0.1s linear"})})}.bind(e),P)}function n(){var e=-1!==navigator.userAgent.toLowerCase().indexOf("webkit")?"body":"html",t=$(e).scrollTop(),r=t+$(window).height(),o=Math.round(w.offset().top),n=o+w.height();return o<r&&n>t}function l(){w.hasClass("start")||n(w)&&(w.addClass("start"),setTimeout(e,250))}function a(e,t){$.each(e,function(r,o){r.toLowerCase()in t&&(e[r]=t[r.toLowerCase()])})}function i(){if(1===r.multiPercentage){var e,t,o,n,l,a=r.percentages,i=47,x=360,d=-90;for(e=0;e<a.length;++e)o=a[e].percent,n=a[e].color,t=x/100*o,e>0&&(x+=62.5,t=x/100*o),i+=10,l+='<circle cx="100" cy="100" r="'+i+'" class="border" fill="'+r.fillColor+'" stroke="'+r.backgroundColor+'" stroke-width="'+C+'" stroke-dasharray="'+x+'" transform="rotate('+-90+',100,100)" /><circle class="circle" id="circle'+(e+1)+'" data-percent="'+o+'" cx="100" cy="100" r="'+i+'" class="border" fill="none" stroke="'+n+'" stroke-width="'+r.foregroundBorderWidth+'" stroke-dasharray="'+t+',20000" transform="rotate('+-90+',100,100)" />';s.addClass("svg-container").append($('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 194 186" class="circliful" preserveAspectRatio="xMidYMin">'+(void 0!==h?h:"")+l+y+'<text class="timer" text-anchor="middle" x="'+p+'" y="'+f+'" style="font-size: '+r.percentageTextSize+"px; "+u+";"+r.textAdditionalCss+'" fill="'+r.fontColor+'"><tspan class="number">'+(null===r.replacePercentageByText?0:r.replacePercentageByText)+'</tspan><tspan class="percent">'+(r.noPercentageSign||null!==r.replacePercentageByText?"":"%")+"</tspan></text>")),1===r.multiPercentageLegend&&c()}else s.addClass("svg-container").append($('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="100%" viewBox="0 0 194 186" class="circliful" preserveAspectRatio="xMidYMin">'+(void 0!==h?h:"")+'<circle cx="100" cy="100" r="57" class="border" fill="'+r.fillColor+'" stroke="'+r.backgroundColor+'" stroke-width="'+C+'" stroke-dasharray="360" transform="rotate(-90,100,100)" /><circle class="circle" cx="100" cy="100" r="57" class="border" fill="none" stroke="'+r.foregroundColor+'" stroke-width="'+r.foregroundBorderWidth+'" stroke-dasharray="0,20000" transform="rotate(-90,100,100)" /><circle cx="100" cy="100" r="'+r.pointSize+'" fill="'+r.pointColor+'" />'+y+'<text class="timer" text-anchor="middle" x="'+p+'" y="'+f+'" style="font-size: '+r.percentageTextSize+"px; "+u+";"+r.textAdditionalCss+'" fill="'+r.fontColor+'"><tspan class="number">'+(null===r.replacePercentageByText?0:r.replacePercentageByText)+'</tspan><tspan class="percent">'+(r.noPercentageSign||null!==r.replacePercentageByText?"":"%")+"</tspan></text>"))}function c(){var e=s.height(),t=s.width(),o=r.percentages,n,l="";for(n=0;n<o.length;++n){var a=o[n].title;l+='<div><span class="color-box" style="background: '+o[n].color+'"></span>'+a+", "+o[n].percent+"%</div>"}s.append($("<div/>").append(l).attr("style","position:absolute;top:"+e/3+"px;left:"+(t+20)+"px").attr("class","legend-line"))}var s=$(this);a(r,s.data());var x=r.percent,d=83,g=100,f=r.percentageY,p=r.percentageX,u,h,y,C=r.backgroundBorderWidth,m=r.progressColor;if(r.halfCircle?"left"===r.iconPosition?(g=80,d=100,p=117,f=100):r.halfCircle&&(d=80,f=100):"bottom"===r.iconPosition?(d=124,f=95):"left"===r.iconPosition?(g=80,d=110,p=117):"middle"===r.iconPosition?(1!==r.multiPercentage&&(h='<g stroke="'+("none"!==r.backgroundColor?r.backgroundColor:"#ccc")+'" ><line x1="133" y1="50" x2="140" y2="40" stroke-width="2"  /></g>',h+='<g stroke="'+("none"!==r.backgroundColor?r.backgroundColor:"#ccc")+'" ><line x1="140" y1="40" x2="200" y2="40" stroke-width="2"  /></g>',p=170,f=35),d=110):"right"===r.iconPosition?(g=120,d=110,p=80):"top"===r.iconPosition&&"none"!==r.icon&&(f=120),r.targetPercent>0&&!0!==r.halfCircle&&(f=95,h='<g stroke="'+("none"!==r.backgroundColor?r.backgroundColor:"#ccc")+'" ><line x1="75" y1="101" x2="125" y2="101" stroke-width="1"  /></g>',h+='<text text-anchor="middle" x="'+p+'" y="120" style="font-size: '+r.targetTextSize+'px;" fill="'+r.targetColor+'">'+r.targetPercent+(r.noPercentageSign&&null===r.replacePercentageByText?"":"%")+"</text>",h+='<circle cx="100" cy="100" r="69" fill="none" stroke="'+r.backgroundColor+'" stroke-width="3" stroke-dasharray="450" transform="rotate(-90,100,100)" />',h+='<circle cx="100" cy="100" r="69" fill="none" stroke="'+r.targetColor+'" stroke-width="3" stroke-dasharray="'+4.35*r.targetPercent+', 20000" transform="rotate(-90,100,100)" />'),null!==r.text&&(r.halfCircle?r.textBelow?h+='<text text-anchor="middle" x="'+(null!==r.textX?r.textX:"100")+'" y="'+(null!==r.textY?r.textY:"64%")+'" style="'+r.textStyle+'" fill="'+r.textColor+'">'+r.text+"</text>":h+='<text text-anchor="middle" x="'+(null!==r.textX?r.textX:"100")+'" y="'+(null!==r.textY?r.textY:"115")+'" style="'+r.textStyle+'" fill="'+r.textColor+'">'+r.text+"</text>":r.textBelow?h+='<text text-anchor="middle" x="'+(null!==r.textX?r.textX:"100")+'" y="'+(null!==r.textY?r.textY:"99%")+'" style="'+r.textStyle+'" fill="'+r.textColor+'">'+r.text+"</text>":h+='<text text-anchor="middle" x="'+(null!==r.textX?r.textX:"100")+'" y="'+(null!==r.textY?r.textY:"115")+'" style="'+r.textStyle+'" fill="'+r.textColor+'">'+r.text+"</text>"),"none"!==r.icon&&(y='<text text-anchor="middle" x="'+g+'" y="'+d+'" class="icon" style="font-size: '+r.iconSize+'px" fill="'+r.iconColor+'">&#x'+r.icon+"</text>"),r.halfCircle){s.addClass("svg-container").append($('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 194 186" class="circliful" preserveAspectRatio="xMidYMin">'+(void 0!==h?h:"")+'<clipPath id="cut-off-bottom"> <rect x="100" y="0" width="100" height="200" /> </clipPath><circle cx="100" cy="100" r="57" class="border" fill="'+r.fillColor+'" stroke="'+r.backgroundColor+'" stroke-width="'+C+'" stroke-dasharray="360" clip-path="url(#cut-off-bottom)" transform="rotate(-90,100,100)" /><circle class="circle" cx="100" cy="100" r="57" class="border" fill="none" stroke="'+r.foregroundColor+'" stroke-width="'+r.foregroundBorderWidth+'" stroke-dasharray="0,20000" '+'transform="rotate(-180,100,100)"'+' /><circle cx="100" cy="100" r="'+r.pointSize+'" fill="'+r.pointColor+'" clip-path="url(#cut-off-bottom)" transform="rotate(-90,100,100)" />'+y+'<text class="timer" text-anchor="middle" x="'+p+'" y="'+f+'" style="font-size: '+r.percentageTextSize+"px; "+u+";"+r.textAdditionalCss+'" fill="'+r.fontColor+'"><tspan class="number">'+(null===r.replacePercentageByText?0:r.replacePercentageByText)+'</tspan><tspan class="percent">'+(r.noPercentageSign||null!==r.replacePercentageByText?"":"%")+"</tspan></text>"))}else i();var w=s.find(".circle"),k=s.find(".timer"),P=30,b=0,v=r.animationStep,B=0,T=0,S=0,z=x,Y=3.6*x;r.halfCircle&&(Y=3.6*x/2),null!==r.replacePercentageByText&&(z=r.replacePercentageByText),r.start>0&&r.target>0&&(x=r.start/(r.target/100),S=r.target/100),1===r.animation?r.animateInView?$(window).scroll(function(){l()}):e():1!==r.multiPercentage?(w.attr("stroke-dasharray",Y+", 20000"),1===r.showPercent?k.find(".number").text(z):(k.find(".number").text(r.target),k.find(".percent").text(""))):null!==r.replacePercentageByText&&(k.find(".number").text(r.replacePercentageByText),k.find(".percent").text(""))})}}(jQuery);